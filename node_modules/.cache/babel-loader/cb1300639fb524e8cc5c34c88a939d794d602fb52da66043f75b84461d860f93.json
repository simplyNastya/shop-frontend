{"ast":null,"code":"import axios from \"axios\";\nconst instance = axios.create({\n  baseURL: 'https://shop-backend-uchk.onrender.com/'\n});\nconst setToken = token => {\n  if (token) {\n    return instance.defaults.headers.authorization = `Bearer ${token}`;\n  }\n  instance.defaults.headers.authorization = '';\n};\nexport const register = async data => {\n  const {\n    data: result\n  } = await instance.post('/users/register', data);\n  setToken(result.token);\n  return result;\n};\nexport const login = async data => {\n  const {\n    data: result\n  } = await instance.post('/users/login', data);\n  setToken(result.token);\n  return result;\n};\nexport const logout = async () => {\n  const {\n    data\n  } = await instance.post('/users/logout');\n  setToken();\n  return data;\n};\nexport const getCurrent = async token => {\n  try {\n    setToken(token);\n    const {\n      data\n    } = await instance.get('/users/current');\n    return data;\n  } catch (error) {\n    setToken();\n    throw error;\n  }\n};\nexport default instance;","map":{"version":3,"names":["axios","instance","create","baseURL","setToken","token","defaults","headers","authorization","register","data","result","post","login","logout","getCurrent","get","error"],"sources":["/Users/mac/Desktop/project/shop/shop-frontend/src/services/API/auth.js"],"sourcesContent":["import axios from \"axios\";\n\nconst instance = axios.create({\n  baseURL: 'https://shop-backend-uchk.onrender.com/',\n});\n\nconst setToken = token => {\n  if (token) {\n    return instance.defaults.headers.authorization = `Bearer ${token}`;\n  } \n   instance.defaults.headers.authorization = '';\n}\n\nexport const register = async (data) => {\n  const { data: result } = await instance.post('/users/register', data);\n  setToken(result.token);\n  return result;\n}\n\nexport const login = async (data) => {\n  const { data: result } = await instance.post('/users/login', data);\n  setToken(result.token);\n  return result;\n}\n\nexport const logout = async () => {\n  const { data } = await instance.post('/users/logout');\n  setToken();\n  return data;\n}\n\nexport const getCurrent = async (token) => {\n  try { \n    setToken(token);\n    const { data } = await instance.get('/users/current');\n    return data;\n  }\n  catch (error) {\n    setToken();\n    throw error;\n  }\n}\n\n\nexport default instance;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,QAAQ,GAAGD,KAAK,CAACE,MAAM,CAAC;EAC5BC,OAAO,EAAE;AACX,CAAC,CAAC;AAEF,MAAMC,QAAQ,GAAGC,KAAK,IAAI;EACxB,IAAIA,KAAK,EAAE;IACT,OAAOJ,QAAQ,CAACK,QAAQ,CAACC,OAAO,CAACC,aAAa,GAAI,UAASH,KAAM,EAAC;EACpE;EACCJ,QAAQ,CAACK,QAAQ,CAACC,OAAO,CAACC,aAAa,GAAG,EAAE;AAC/C,CAAC;AAED,OAAO,MAAMC,QAAQ,GAAG,MAAOC,IAAI,IAAK;EACtC,MAAM;IAAEA,IAAI,EAAEC;EAAO,CAAC,GAAG,MAAMV,QAAQ,CAACW,IAAI,CAAC,iBAAiB,EAAEF,IAAI,CAAC;EACrEN,QAAQ,CAACO,MAAM,CAACN,KAAK,CAAC;EACtB,OAAOM,MAAM;AACf,CAAC;AAED,OAAO,MAAME,KAAK,GAAG,MAAOH,IAAI,IAAK;EACnC,MAAM;IAAEA,IAAI,EAAEC;EAAO,CAAC,GAAG,MAAMV,QAAQ,CAACW,IAAI,CAAC,cAAc,EAAEF,IAAI,CAAC;EAClEN,QAAQ,CAACO,MAAM,CAACN,KAAK,CAAC;EACtB,OAAOM,MAAM;AACf,CAAC;AAED,OAAO,MAAMG,MAAM,GAAG,MAAAA,CAAA,KAAY;EAChC,MAAM;IAAEJ;EAAK,CAAC,GAAG,MAAMT,QAAQ,CAACW,IAAI,CAAC,eAAe,CAAC;EACrDR,QAAQ,CAAC,CAAC;EACV,OAAOM,IAAI;AACb,CAAC;AAED,OAAO,MAAMK,UAAU,GAAG,MAAOV,KAAK,IAAK;EACzC,IAAI;IACFD,QAAQ,CAACC,KAAK,CAAC;IACf,MAAM;MAAEK;IAAK,CAAC,GAAG,MAAMT,QAAQ,CAACe,GAAG,CAAC,gBAAgB,CAAC;IACrD,OAAON,IAAI;EACb,CAAC,CACD,OAAOO,KAAK,EAAE;IACZb,QAAQ,CAAC,CAAC;IACV,MAAMa,KAAK;EACb;AACF,CAAC;AAGD,eAAehB,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}