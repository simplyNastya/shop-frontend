{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/Desktop/project/shop/shop-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mac/Desktop/project/shop/shop-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from\"axios\";var instance=axios.create({baseURL:'https://shop-backend-uchk.onrender.com/'});var setToken=function setToken(token){if(token){return instance.defaults.headers.authorization=\"Bearer \".concat(token);}instance.defaults.headers.authorization='';};export var register=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var _yield$instance$post,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return instance.post('/users/register',data);case 2:_yield$instance$post=_context.sent;result=_yield$instance$post.data;setToken(result.token);return _context.abrupt(\"return\",result);case 6:case\"end\":return _context.stop();}},_callee);}));return function register(_x){return _ref.apply(this,arguments);};}();export var login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data){var _yield$instance$post2,result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return instance.post('/users/login',data);case 2:_yield$instance$post2=_context2.sent;result=_yield$instance$post2.data;setToken(result.token);return _context2.abrupt(\"return\",result);case 6:case\"end\":return _context2.stop();}},_callee2);}));return function login(_x2){return _ref2.apply(this,arguments);};}();export var logout=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var _yield$instance$post3,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return instance.post('/users/logout');case 2:_yield$instance$post3=_context3.sent;data=_yield$instance$post3.data;setToken();return _context3.abrupt(\"return\",data);case 6:case\"end\":return _context3.stop();}},_callee3);}));return function logout(){return _ref3.apply(this,arguments);};}();export var getCurrent=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(token){var _yield$instance$get,data;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;setToken(token);_context4.next=4;return instance.get('/users/current');case 4:_yield$instance$get=_context4.sent;data=_yield$instance$get.data;return _context4.abrupt(\"return\",data);case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](0);setToken();throw _context4.t0;case 13:case\"end\":return _context4.stop();}},_callee4,null,[[0,9]]);}));return function getCurrent(_x3){return _ref4.apply(this,arguments);};}();export default instance;","map":{"version":3,"names":["axios","instance","create","baseURL","setToken","token","defaults","headers","authorization","concat","register","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","_yield$instance$post","result","wrap","_callee$","_context","prev","next","post","sent","abrupt","stop","_x","apply","arguments","login","_ref2","_callee2","_yield$instance$post2","_callee2$","_context2","_x2","logout","_ref3","_callee3","_yield$instance$post3","_callee3$","_context3","getCurrent","_ref4","_callee4","_yield$instance$get","_callee4$","_context4","get","t0","_x3"],"sources":["/Users/mac/Desktop/project/shop/shop-frontend/src/services/API/auth.js"],"sourcesContent":["import axios from \"axios\";\n\nconst instance = axios.create({\n  baseURL: 'https://shop-backend-uchk.onrender.com/',\n});\n\nconst setToken = token => {\n  if (token) {\n    return instance.defaults.headers.authorization = `Bearer ${token}`;\n  } \n   instance.defaults.headers.authorization = '';\n}\n\nexport const register = async (data) => {\n  const { data: result } = await instance.post('/users/register', data);\n  setToken(result.token);\n  return result;\n}\n\nexport const login = async (data) => {\n  const { data: result } = await instance.post('/users/login', data);\n  setToken(result.token);\n  return result;\n}\n\nexport const logout = async () => {\n  const { data } = await instance.post('/users/logout');\n  setToken();\n  return data;\n}\n\nexport const getCurrent = async (token) => {\n  try { \n    setToken(token);\n    const { data } = await instance.get('/users/current');\n    return data;\n  }\n  catch (error) {\n    setToken();\n    throw error;\n  }\n}\n\n\nexport default instance;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}